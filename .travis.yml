language: python
#sudo: false
addons:
  apt:
    packages:
    - tox
    - libpython3.7 

matrix:
  include:
    - os: linux
      arch: arm64
      language: generic
      env: PYTHON_VERSION=3.7

before_install:
  # Install latest miniconda
  - wget -q "https://github.com/Archiconda/build-tools/releases/download/0.2.3/Archiconda3-0.2.3-Linux-aarch64.sh" -O archiconda.sh;
  - chmod +x archiconda.sh;
  - bash archiconda.sh -b -p $HOME/miniconda;
  - export PATH="$HOME/miniconda/bin:$PATH";
  - sudo cp -r $HOME/miniconda/bin/* /usr/bin/;
  - source "$HOME"/miniconda/etc/profile.d/conda.sh;
  - source activate;

install:
  - python setup.py install

script:
  - tox -v
